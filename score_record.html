<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0"
    >
    <title>Score Record</title>

    <!-- Include Material-UI CSS -->
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    />
    <link
        rel="stylesheet"
        href="https://unpkg.com/@mui/material@5.4.1/styles.css"
    />


    <!-- Include React and ReactDOM via CDN -->
    <script
        src="https://unpkg.com/react@18/umd/react.development.js"
        crossorigin
    ></script>
    <script
        src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
        crossorigin
    ></script>
    <!-- Include Babel for JSX support -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Include Material-UI JavaScript -->
    <script src="https://unpkg.com/@mui/material@5.4.1/umd/material-ui.development.js"></script>

    <style>
        body {
            padding: 20px;
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Container, TextField, Button, Typography, List, ListItem, ListItemText, Grid, InputAdornment } = MaterialUI;

        const App = () => {
            const [items, setItems] = useState(() => {
                const savedItems = localStorage.getItem('items');
                return savedItems ? JSON.parse(savedItems) : [];
            });
            const [inputValue, setInputValue] = useState('');
            const [prevItems, setPrevItems] = useState([]);
            const [spacing, setSpacing] = useState(5); // 控制间距

            useEffect(() => {
                localStorage.setItem('items', JSON.stringify(items));
            }, [items]);

            const addItem = () => {
                const number = parseFloat(inputValue);
                if (!isNaN(number)) {
                    setPrevItems(items); // Store previous items before adding
                    setItems([...items, number]);
                    setInputValue('');
                }
            };

            const resetItems = () => {
                setPrevItems(items); // Store current items for restoration
                setItems([]);
                setInputValue('');
            };

            const restoreItems = () => {
                setItems(prevItems);
                setPrevItems([]);
            };

            const handleKeyPress = (event) => {
                if (event.key === 'Enter') {
                    addItem();
                }
            };

            const sumItems = items.reduce((acc, item) => acc + item, 0);

            return (
                <Container sx={{ marginTop: 2 }}>
                    <Grid container spacing={spacing}>
                        <Grid item xs={12}>
                            <Typography variant="h4" gutterBottom>Score Record</Typography>
                            <Typography variant="h5">Total: {sumItems}</Typography>
                        </Grid>

                        <Grid item xs={12}>

                            <Button variant="outlined" color="secondary" onClick={resetItems} style={{ marginRight: '10px' }}>Reset</Button>
                            <Button variant="outlined" onClick={restoreItems} disabled={prevItems.length === 0} style={{ marginRight: '10px' }}>Restore</Button>
                        </Grid>

                        <Grid item xs={12}>

                            <TextField
                                type="number"
                                value={inputValue}
                                onChange={(e) => setInputValue(e.target.value)}
                                onKeyPress={handleKeyPress} // 绑定回车事件
                                label="Enter a score"
                                variant="outlined"

                                InputProps={{
                                    endAdornment: (
                                        <InputAdornment position="end">
                                            <Button variant="contained" color="primary" onClick={addItem}>
                                                Add
                                            </Button>
                                        </InputAdornment>
                                    ),
                                }}
                            />
                        </Grid>

                        <Grid item xs={12}>
                            <List style={{ marginTop: '20px', width: '300px', maxWidth: '100%' }}>
                                {items.map((item, index) => (
                                    <ListItem key={index}>
                                        <ListItemText primary={item} />
                                    </ListItem>
                                ))}
                            </List>
                        </Grid>
                    </Grid>
                </Container>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>

</html>